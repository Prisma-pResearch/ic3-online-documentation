<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-datasets/phase1">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Phase 1 - Data Preprocessing | Intelligent Critical Care Center Online Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Chesterguan.github.io/ic3-online-documentation/docs/datasets/phase1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Phase 1 - Data Preprocessing | Intelligent Critical Care Center Online Documentation"><meta data-rh="true" name="description" content="Details of Phase 1 pipeline workflow"><meta data-rh="true" property="og:description" content="Details of Phase 1 pipeline workflow"><link data-rh="true" rel="icon" href="/ic3-online-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Chesterguan.github.io/ic3-online-documentation/docs/datasets/phase1"><link data-rh="true" rel="alternate" href="https://Chesterguan.github.io/ic3-online-documentation/docs/datasets/phase1" hreflang="en"><link data-rh="true" rel="alternate" href="https://Chesterguan.github.io/ic3-online-documentation/docs/datasets/phase1" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/ic3-online-documentation/blog/rss.xml" title="Intelligent Critical Care Center Online Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ic3-online-documentation/blog/atom.xml" title="Intelligent Critical Care Center Online Documentation Atom Feed"><link rel="stylesheet" href="/ic3-online-documentation/assets/css/styles.0493daec.css">
<link rel="preload" href="/ic3-online-documentation/assets/js/runtime~main.06976e31.js" as="script">
<link rel="preload" href="/ic3-online-documentation/assets/js/main.f346e76d.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ The document is in development!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ic3-online-documentation/"><div class="navbar__logo"><img src="/ic3-online-documentation/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ic3-online-documentation/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ic3-online-documentation/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/ic3-online-documentation/resources/intro">Resources</a><a class="navbar__item navbar__link" href="/ic3-online-documentation/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-resources-current"></div></div></div><a href="https://github.com/Prisma-pResearch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ic3-online-documentation/docs/intro">Documentation Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ic3-online-documentation/docs/category/featured-projects">Featured Projects</a><button aria-label="Toggle the collapsible sidebar category &#x27;Featured Projects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/ic3-online-documentation/docs/category/datasets">Datasets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Datasets&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/category/datasets">Datasets Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/core_concepts">Core concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/InpatientDatabase">Inpatient Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ic3-online-documentation/docs/datasets/phase1">Phase 1 - Data Preprocessing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/phase2">Phase 2 - Data Cleaning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/phase3">Phase 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/sofacalculation">Phase 4 - SOFA Score Calculation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/phase5">Phase 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/Chorus">Chorus datasets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/IDEALIST">IDEALIST</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ic3-online-documentation/docs/datasets/AKIEPIC2">AKIEPIC2</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ic3-online-documentation/docs/category/workspaces">Workspaces</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workspaces&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ic3-online-documentation/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ic3-online-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ic3-online-documentation/docs/category/datasets"><span itemprop="name">Datasets</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Phase 1 - Data Preprocessing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Phase 1 - Data Preprocessing</h1></header><div style="text-align:justify"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-code-details">Python Code Details<a href="#python-code-details" class="hash-link" aria-label="Direct link to Python Code Details" title="Direct link to Python Code Details">​</a></h2><p>Below are the codes involved in this phase for the data cleaning, coordination, and merging processes of the Electronic Health Data from IDR.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-run_pipelinepy">&gt; Run_pipeline.py<a href="#-run_pipelinepy" class="hash-link" aria-label="Direct link to &gt; Run_pipeline.py" title="Direct link to &gt; Run_pipeline.py">​</a></h2><p>This file contains the run_IDR_pipeline function, which is called from the main.py file. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">WORKFLOW<a href="#workflow" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Trigger run_IDR_pipeline function</summary><div><div class="collapsibleContent_i85q">This script is the entry point for the entire code. The run_IDR_pipeline function is run with necessary arguments. This function is responsible for running the entire pipeline, including setting up the project, running phases I through III, coordinating Phase IV, and generating variables for batches.</div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-phase_i_through_iii_coordinatorpy">&gt; phase_I_through_III_coordinator.py<a href="#-phase_i_through_iii_coordinatorpy" class="hash-link" aria-label="Direct link to &gt; phase_I_through_III_coordinator.py" title="Direct link to &gt; phase_I_through_III_coordinator.py">​</a></h2><p>This script handles the structured process for executing a three-phase data operation, starting with initialization and conditional checks for pre-completion. This file contains functions related to the coordination of phases I, II, and III of the pipeline. It includes functions like run_phase_I, run_phase_II_and_III, and run_phases_I_II_III, which handle various tasks such as creating lookup tables, cleaning files, labeling files with merged IDs, and running these phases in parallel.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-1">WORKFLOW<a href="#workflow-1" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Initialization</summary><div><div class="collapsibleContent_i85q"><ul><li>Import required modules and tools</li><li>Load custom modules/functions necessary for coordinating phases I, II, and III.</li><li>Decision: Check if merging has already been completed. If Completed then Skip to the end; Else, Proceed to &quot;Retrieve Batches.&quot;</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Retrieve Batches</summary><div><div class="collapsibleContent_i85q"><ul><li>Get batches from the directory using get_batches_from_directory function.</li><li>Execute run_phase_I function</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Execute run_phase_I function</summary><div><div class="collapsibleContent_i85q"><p>This function internally calls the function (or functions) associated with Phase I processing that likely involves data cleaning, processing, and saving operations. Any errors or conditions will be logged and handled appropriately.</p></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Execute run_phase_II function</summary><div><div class="collapsibleContent_i85q">This function internally calls the function (or functions) associated with Phase II processing that include more specific data transformations, validations, etc. Any errors or conditions will be logged and handled appropriately.</div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Execute run_phase_III function</summary><div><div class="collapsibleContent_i85q">This function internally Calls the function (or functions) associated with with Phase III processing that handles data refining, aggregations, and other operations. Any errors or conditions will be logged and handled appropriately.</div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Ensure Completion Status of all Phases</summary><div><div class="collapsibleContent_i85q"><p>After the completion of execution of all the above functions, this decision check will ensure the completion status of all phases.</p><ul><li>If all Phases (I, II, III) are complete then it will write a success file indicating successful completion of all phases.</li><li>If any phase is incomplete or encountered errors then it will log specific errors or issues related to the failed phase and exit without writing the success file.</li></ul></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="--clean_data_phase1py">&gt;  clean_data_phase1.py<a href="#--clean_data_phase1py" class="hash-link" aria-label="Direct link to &gt;  clean_data_phase1.py" title="Direct link to &gt;  clean_data_phase1.py">​</a></h2><p>This script automates the initial phase of data cleaning by loading, verifying, and formatting data sets, then executes a series of defined transformations and checks to ensure data integrity before saving the sanitized results for further processing. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-2">WORKFLOW<a href="#workflow-2" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Initialization</summary><div><div class="collapsibleContent_i85q"><ul><li>Import required modules and tools specific to Phase 1</li><li>Load custom modules/functions necessary</li><li>Decision: Check if lookup table generation is done. If Completed then Skip this pre-processing phase(phase 1); Else, proceed with next cleanup steps in the phase.</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Check IDR Data Transfer Completion Status</summary><div><div class="collapsibleContent_i85q"><ul><li><p>Decision: Check if IDR Data Transfer is complete.
If Yes then </p><ul><li><p>Calculate the number of batches.</p></li><li><p>Determine the optimal number of workers using calculate_optimal_workers.</p></li><li><p>Prepare arguments for parallel execution.</p><p>Else, Log Error and Exit</p></li></ul></li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Execute Data Cleaning</summary><div><div class="collapsibleContent_i85q"><ul><li>Retrieve Data</li><li>Format Identifiers</li><li>Merge Data</li><li>Check Completeness</li><li>Save Data</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> Parallel Execution of clean_data_phase_I function </summary><div><div class="collapsibleContent_i85q"><p>Execute clean_data_phase_I function in parallel using the optimal number of workers.</p></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Check completion status of individual batch processes </summary><div><div class="collapsibleContent_i85q"><p>If All batch processes are complete:</p><ul><li>Write a success file for phase I</li></ul><p>Else, Log an error and exit the program</p></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="--clean_internal_external_stationspy">&gt;  clean_internal_external_stations.py<a href="#--clean_internal_external_stationspy" class="hash-link" aria-label="Direct link to &gt;  clean_internal_external_stations.py" title="Direct link to &gt;  clean_internal_external_stations.py">​</a></h2><p>This script handles fucntions to format, clean, and reconcile data from internal and external hospital stations, handling complexities such as patient transfers, overlapping data, and OR schedules integration, ultimately ensuring data integrity and usability for subsequent healthcare analytics.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-3">WORKFLOW<a href="#workflow-3" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Initialization</summary><div><div class="collapsibleContent_i85q"><ul><li>Import required modules and tools</li><li>Set global variables and Configure logging settings</li><li>Formatting of datetime columns and renaming certain column prefixes is done</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Load Data</summary><div><div class="collapsibleContent_i85q"><ul><li>Load internal and external stations data with data integrity checks</li><li>Organize data from the internal stations, handling patient transfer data within the hospital</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Cleaning</summary><div><div class="collapsibleContent_i85q"><ul><li>Resolve overlaps and inconsistencies in transfer data, correct duplications or errors</li><li>Integrate OR case schedules with station data to track patient movements</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Consistency Checks</summary><div><div class="collapsibleContent_i85q"><ul><li>Check specific columns like STATIONTYPE for discrepancies</li><li>Handle scenarios related to patient admissions, creating or modifying data rows as needed</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Saving</summary><div><div class="collapsibleContent_i85q"><ul><li>Impute missing data, particularly exit times from stations, using discharge information</li><li>Use utility functions for data mapping, null assignments, and classifying station priorities</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Finalize Clean Data</summary><div><div class="collapsibleContent_i85q"><ul><li>Arrange the cleaned data for accessibility and comprehension</li><li>Sort data by encounter IDs and entry times, moving certain columns for readability</li><li>Save the cleaned data and write a success file to indicate completion</li></ul></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="--clean_or_encounters_3py">&gt;  clean_or_encounters_3.py<a href="#--clean_or_encounters_3py" class="hash-link" aria-label="Direct link to &gt;  clean_or_encounters_3.py" title="Direct link to &gt;  clean_or_encounters_3.py">​</a></h2><p>This script handles the functions to clean and validate Operating Room (OR) encounter data, employing specialized utility functions to ensure accurate surgery timelines, and preparing the data for seamless integration with broader healthcare datasets.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-4">WORKFLOW<a href="#workflow-4" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Initialization</summary><div><div class="collapsibleContent_i85q"><ul><li>Import necessary modules and configurations</li><li>Load any required custom functions for OR encounter data</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Extraction</summary><div><div class="collapsibleContent_i85q"><ul><li>Load data for OR encounters</li><li>Validate the structure and content of the data</li><li>Utilize utility functions for timestamp and percentage comparisons</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Cleaning</summary><div><div class="collapsibleContent_i85q"><ul><li>Standardize, format, and sanitize the data using functions such as _fill_proposed_start_stop_times to determine accurate surgery start and end times</li><li>Convert times from integer to proper datetime formats with _convert_integer_time_to_datetime for precise time calculations</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Validation</summary><div><div class="collapsibleContent_i85q"><ul><li>Ensure data meets specific criteria, utilizing comparison functions to assess the start and end times of surgeries</li><li>Cross-verify data with existing reference tables or sources, ensuring consistency and accuracy</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Merging/Integration</summary><div><div class="collapsibleContent_i85q">Combine or integrate the cleaned OR encounters data with other datasets, aligning all related encounter information</div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Saving</summary><div><div class="collapsibleContent_i85q">Store the cleaned and merged OR encounters data after applying all cleaning and formatting rules through clean_or_case_schedule, ensuring the data is ready for analysis.</div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Completion Checks</summary><div><div class="collapsibleContent_i85q"><ul><li>Validate if all cleaning and processing steps were successful.</li><li>If Yes then write a success file, else Log errors and specify the nature of any discrepancies.</li></ul></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="--merge_encounterspy">&gt;  merge_encounters.py<a href="#--merge_encounterspy" class="hash-link" aria-label="Direct link to &gt;  merge_encounters.py" title="Direct link to &gt;  merge_encounters.py">​</a></h2><p>This script streamlines healthcare data management by merging overlapping patient encounters into a cohesive record and updating encounter IDs, ensuring dataset consistency and integrity for subsequent analysis. It employs a series of functions for loading, cleaning, prioritizing, and labeling encounter data effectively.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-5">WORKFLOW<a href="#workflow-5" class="hash-link" aria-label="Direct link to WORKFLOW" title="Direct link to WORKFLOW">​</a></h4><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Initialization</summary><div><div class="collapsibleContent_i85q"><ul><li>Load dataframes or paths from files including billing accounts and admit discharge stations</li><li>Configure logging settings, format datetime columns, and perform initial data cleaning</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Check and Load DataFrames</summary><div><div class="collapsibleContent_i85q"><ul><li>Load the primary encounter dataframe and lookup dataframe</li><li>Apply initial filters to exclude non-inpatient admissions, and handle OR cases as specified</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Processing</summary><div><div class="collapsibleContent_i85q"><ul><li>Rename columns for consistency</li><li>Use connectivity graph logic from merge_encounters to identify and merge overlapping encounters into a single consistent record</li><li>Assign priorities with functions like _highest_priority_patient_type and _highest_priority_encounter_type to ensure the most relevant information is preserved</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Updating IDs and Creating Lookup Table</summary><div><div class="collapsibleContent_i85q"><ul><li>Generate new encounter IDs with update_encounter_ids for uniquely identifying merged encounters</li><li>Create a lookup table mapping old encounter IDs to the new merged ones with create_encounter_lookup_table, a crucial step for data consistency</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Data Labeling and Saving</summary><div><div class="collapsibleContent_i85q"><ul><li>Label datasets with the new merged encounter IDs using label_df_with_merged_encounter_id, adaptable to various data structures and file types</li><li>Save the processed data, now labeled and formatted correctly</li></ul></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Completion Checks</summary><div><div class="collapsibleContent_i85q"><ul><li>Validate if all merging, labeling, and processing steps were successful. </li><li>If successful, write a success file; otherwise, log errors and exit</li></ul></div></div></details><h1>Phase 1 Comprehensive Flowchart</h1><p>Below is the comprehensive high level flowchart of entire Phase 1 processes</p><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAARCAYAAADkIz3lAAAACXBIWXMAABYlAAAWJQFJUiTwAAACjUlEQVQokU2SzUsUcRzGv+ta1NVDBB0KpEOX/oNOvUBkEIEhCBZphzqolAarlohIbi8GnURBiRAPiW7uzs44L7urmbYquju7M7OzM6vuss7Ozvu4ahHRL1Y69DyX5/CBhy/fB97Xs1DmDr1q6gByjNsqLRpFmbEnCoAg141AXnDhWFVQ437U6OmfsMNUruW+2lO5iNuBEAbYVQck/D9QSVW8JfYAZNp5kImW8yJtjCFA4PQjkIh/4LuLCdhds2sKay7wIeMmiyuzHKY9r4JVE1Mp6PKPAryENBQSlreYckCirOZNIs/zZPnD2fEL0Nk7AUhBEPskA7w+t16trinFj4DDtTscrTI8oQ0+7Z442fjGdwKGwPPZvwkQn8t7nPjvWoQQbMwVW3hKDQik3usfCpwaeRWsGxuOnNn3IS9sBkrwK3kEPF1e5piSJRDWjT8JBCurHEhRczy7pDsSbftAwpy6xZnMrURor58NKfdk0r3OMkoDF9IvSZTTJsesSXnBvQ0y7TZt4YUKR5Rnkt9lyJBGTzamVyTK9qcw1Z8gCttC2OiAPt/06TSm3ecodZYn9IdC2KjmeQ7T2zKE2c7T5ZBEOE1QPSJDmne5iLKVofQRmXHat1fsDZmxn8kR+4UQU9d3o5VHIJJWQzZibIkL5uQPpIOAG4+TeDEuhM1ONljqSRLFVS6ot1affllkjLdSxOpCg8gj4lYLiytBATPb2Hn1SSJcnOXm9UbYieyDEFUhy5ggswoIlNaXju7tCaQ+IEWt0dw38zBLmb0gU45HYDRvdkmrlTZU4IJ6Y4pQP6aDWnP2y369RDpX+IB1/ngYqWkL8hnNs5vWQSSNATGmGyJpDG/HDSguH0GOduEvZvnAWUTjxt8AAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="1099"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/ic3-online-documentation/assets/ideal-img/lowlevelphase1.a41772c.640.png" srcset="/ic3-online-documentation/assets/ideal-img/lowlevelphase1.a41772c.640.png 640w,/ic3-online-documentation/assets/ideal-img/lowlevelphase1.b29fa77.774.png 774w" width="640" height="1099"></noscript></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To get more details about low-level flow of Phase 1, access the flowchart at <a href="https://whimsical.com/flowchart-for-data-processing-scripts-FbNMLd3ebpHLEz77T2hQui" target="_blank" rel="noopener noreferrer" alt="low-level flowchart - Phase 1"><strong>Detailed flowchart-Phase-I</strong> </a> </p></div></div><p>Below is the sequence flowchart to show the hierarchy of flow between files of Phase 1</p><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAhklEQVQImQF7AIT/AK1K1SWjt+ZGkcrpL1vLwDtGoHsa/2kDJ+tARyetHKYvZD7aLxOj4S4AAAAzAAAA1QD/8+0Z++30GOvr8Ejn9PxO2f//E6QAYAD///8AAE3rAAC6ptsFnbbeBP///wAAhYICvtTZDurq6jrt7e5+4t/qIJih1AmYyuMImgtAarbXABMAAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="212"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/ic3-online-documentation/assets/ideal-img/phase1seq.317e90a.640.png" srcset="/ic3-online-documentation/assets/ideal-img/phase1seq.317e90a.640.png 640w,/ic3-online-documentation/assets/ideal-img/phase1seq.75f974c.904.png 904w" width="640" height="212"></noscript></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Prisma-pResearch/ic3-online-documentation/edit/main/websites/docs/datasets/phase1.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-02-03T22:20:40.000Z">Feb 3, 2025</time></b> by <b>srisharanya Injarapu</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/ic3-online-documentation/docs/datasets/InpatientDatabase"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Inpatient Database</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ic3-online-documentation/docs/datasets/phase2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Phase 2 - Data Cleaning</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#python-code-details" class="table-of-contents__link toc-highlight">Python Code Details</a></li><li><a href="#-run_pipelinepy" class="table-of-contents__link toc-highlight">&gt; Run_pipeline.py</a></li><li><a href="#-phase_i_through_iii_coordinatorpy" class="table-of-contents__link toc-highlight">&gt; phase_I_through_III_coordinator.py</a></li><li><a href="#--clean_data_phase1py" class="table-of-contents__link toc-highlight">&gt;  clean_data_phase1.py</a></li><li><a href="#--clean_internal_external_stationspy" class="table-of-contents__link toc-highlight">&gt;  clean_internal_external_stations.py</a></li><li><a href="#--clean_or_encounters_3py" class="table-of-contents__link toc-highlight">&gt;  clean_or_encounters_3.py</a></li><li><a href="#--merge_encounterspy" class="table-of-contents__link toc-highlight">&gt;  merge_encounters.py</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ic3-online-documentation/docs/category/featured-projects">Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/ic3-online-documentation/docs/category/datasets">Datasets</a></li><li class="footer__item"><a class="footer__link-item" href="/ic3-online-documentation/docs/category/tutorials">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><div> <a class="footer__link-item" href="https://ufhealth.org/" style="list-style: none; color: white;" onmouseover='this.style.color="#005494"' onmouseout='this.style.color="#FFF"'>UF Health</a></div></li><li class="footer__item"><div> <a class="footer__link-item" href="https://twitter.com/UF_IC3" style="list-style: none; color: white;" onmouseover='this.style.color="#005494"' onmouseout='this.style.color="#FFF"'>Twitter</a></div></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ic3-online-documentation/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ic3.center.ufl.edu" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/ic3-online-documentation/img/Intelligent Critical Care Center.png" alt="ic3 logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/ic3-online-documentation/img/Intelligent Critical Care Center.png" alt="ic3 logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2025 Intelligent Critical Care Center, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ic3-online-documentation/assets/js/runtime~main.06976e31.js"></script>
<script src="/ic3-online-documentation/assets/js/main.f346e76d.js"></script>
</body>
</html>